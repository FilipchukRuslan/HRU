@model WebApp.ViewModels.StartPageViewModel
@{
    ViewData["Title"] = "Home Page";
}
<link href="~/css/site.css" rel="stylesheet" />
<style>
    body {
        font-family: Tahoma;
        margin: 0% auto !important;
        padding: 0% !important;
        background: none;
    }

    .eo-date .eo-date__day {
        font-size: 18px;
        font-weight: 700;
    }

    .eo-date .eo-date__month {
        font-size: 11px;
        text-transform: uppercase;
    }

    .eo-date {
        display: -webkit-box;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -webkit-flex-direction: column;
        -ms-flex-direction: column;
        flex-direction: column;
        background: #eee;
        text-align: center;
        width: 50px;
        height: 50px;
        color: #888;
        -webkit-box-align: center;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-align-content: center;
        -ms-flex-line-pack: center;
        align-content: center;
        -ms-grid-column-align: center;
        justify-items: center;
        -webkit-box-pack: center;
        -webkit-justify-content: center;
        -ms-flex-pack: center;
        justify-content: center;
        margin-top: 4px;
    }

    .modalDialog, .modalDialog2 {
        position: fixed;
        font-family: Arial, Helvetica, sans-serif;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0,0,0,0.8);
        z-index: 99999;
        -webkit-transition: opacity 400ms ease-in;
        -moz-transition: opacity 400ms ease-in;
        transition: opacity 400ms ease-in;
        display: none;
        pointer-events: none;
        max-height: 100%;
        overflow-y: auto;
    }

        .modalDialog:target, .modalDialog2:target {
            display: block;
            pointer-events: auto;
        }

        .modalDialog > div, .modalDialog2 > div {
            width: 600px;
            position: relative;
            margin: 10% auto;
            padding: 5px 20px 13px 20px;
            border-radius: 10px;
            background: #fff;
            background: -moz-linear-gradient(#fff, #999);
            background: -webkit-linear-gradient(#fff, #999);
            background: -o-linear-gradient(#fff, #999);
        }

    .close, .close2 {
        background: #ff0000;
        color: #fff;
        line-height: 25px;
        position: absolute;
        right: -12px;
        text-align: center;
        top: -10px;
        width: 24px;
        text-decoration: none;
        font-weight: bold;
        -webkit-border-radius: 12px;
        -moz-border-radius: 12px;
        border-radius: 12px;
        -moz-box-shadow: 1px 1px 3px #000;
        -webkit-box-shadow: 1px 1px 3px #000;
        box-shadow: 1px 1px 3px #000;
    }

        .close:hover, .close2:hover {
            background: #00d9ff;
        }

    .section:hover {
        cursor: pointer;
        color: slategrey;
    }

    .title:hover {
        cursor: pointer;
        color: slategrey;
    }

    #preview {
        max-height: 150px;
        min-height: 150px;
        max-width: 220px;
        min-width: 220px;
    }



    li {
        list-style-type: none;
    }

    .listOfNews {
        margin-bottom: 6px;
        font-size: 18px;
    }

    .date {
        color: #999;
        font-size: 16px;
    }

    hr {
        margin-top: 30px;
        margin-bottom: 0%;
        border: 1.5px solid #eeeeef;
    }

    .stripe {
        width: 33%;
        height: 30px;
        background-color: rgba(41, 79, 209, 0.70);
        float: left;
        margin-right: 80px;
        margin-bottom: 30px;
        color: rgb(255, 255, 255);
        font-size: 20px;
        text-align: right;
        font-weight: 500;
        letter-spacing: 3px;
    }

    .decorator {
        width: 35%;
        height: 30px;
        border-top: 30px solid rgb(41, 79, 209);
        border-right: 15px solid transparent;
    }

    .brandHeader {
        background: linear-gradient(180deg, rgb(1, 141, 255), rgb(101, 206, 255));
        height: 75px;
    }

    .brandHeader {
        background: linear-gradient(180deg, rgb(0, 0, 0), rgb(41, 42, 51));
        height: 75px;
    }

    .container-fluid {
        margin: 0% auto;
        padding: 0%;
    }

    .last-news {
        margin: 5px 0px 25px;
        font-size: 25px;
        color: #414141;
        font-weight: 300;
    }

    .newsBlock {
        margin-bottom: 23px;
        font-weight: 400;
        font-size: 18px;
    }

    .slider {
        max-height: 590px;
        min-height: 590px;
        max-width: 1050px;
        min-width: 1050px;
    }

    .c {
        text-align: center;
    }

    img {
        background-size: cover;
    }

    .clear {
        clear: both;
    }

    .backGr {
        background-size: contain;
        background-position: 50% 50%;
    }

    .faceBook {
        background: rgba(234, 234, 234, 0.83);
        border: 1px solid rgba(164, 164, 164, 0.33);
        font-size: 18px;
    }

    .profile {
        max-height: 100px;
        min-height: 100px;
        max-width: 100px;
        min-width: 100px;
        border-radius: 50px;
    }

    .icon {
        max-height: 25px;
        min-height: 25px;
        max-width: 25px;
        min-width: 25px;
    }

    .fbName {
        font-size: 18px;
        color: black;
    }

    .col {
        float: left;
        margin-right: 12px;
    }

    .blackWraping {
        position: absolute;
        left: 40px;
        bottom: 4px;
        /* width: 87%; */
        text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.4);
        line-height: 33px;
        color: #FEFEFE;
        font-size: 20px;
        font-weight: 500;
        z-index: 3;
        background: rgba(0,0,0,.5);
        padding: 10px;
        max-width: 85%;
    }

    .targets {
        float: left;
        margin-right: 20px;
        color: #034EA1;
        width: 11px;
        height: 11px;
        border: 2px solid #4d56b0;
        border-radius: 50%;
        margin: 4px;
        display: inline-block;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        cursor: pointer;
    }

    .targetsBlock {
        position: absolute;
        display: inline-block;
        left: 10px;
        bottom: 12px;
        z-index: 3;
        width: 10px;
    }

    .fixTop {
        margin-top: -19px !important;
    }

    .projImg {
        width: auto;
        height: auto;
    }
    .projImg {
        width: 312px;
        height: 200px;
    }

    .projects {
        height: 370px;
        overflow: auto;
    }
</style>
<div id="myCarousel" class="carousel slide fixTop" data-ride="carousel">

    <div class="targetsBlock">
        <div class="targets" data-target="#myCarousel" data-slide-to="0"></div>
        <div class="targets" data-target="#myCarousel" data-slide-to="1"></div>
        <div class="targets" data-target="#myCarousel" data-slide-to="2"></div>
    </div>

    <!-- Wrapper for slides -->
    <div class="carousel-inner">
        <div class="item active">
            <div class="backGr" style="background-image:url(@Model.CarouselLst[0].ImageMin);">
                <div class="c">
                    <img class="slider" src="@Model.ImagesLst.Where(e=>e.Id==Model.CarouselLst[0].Image_Id).FirstOrDefault().ImagePath" alt="Chania">
                </div>

                <p class="blackWraping">@Model.CarouselLst[0].Text</p>
            </div>


        </div>

        <div class="item">
            <div class="backGr" style="background-image:url(@Model.CarouselLst[1].ImageMin);">
                <div class="c">
                    <img class="slider" src="@Model.ImagesLst.Where(e=>e.Id==Model.CarouselLst[1].Image_Id).FirstOrDefault().ImagePath" alt="Chania">
                </div>

                <p class="blackWraping">@Model.CarouselLst[1].Text</p>

            </div>

        </div>

        <div class="item">
            <div class="backGr" style="background-image:url(@Model.CarouselLst[2].ImageMin);">
                <div class="c">
                    <img class="slider" src="@Model.ImagesLst.Where(e=>e.Id==Model.CarouselLst[2].Image_Id).FirstOrDefault().ImagePath" alt="Chania">
                </div>

                <p class="blackWraping">@Model.CarouselLst[2].Text</p>
            </div>
        </div>
    </div>
</div>



@if (User.IsInRole("Administrator"))
{
    <div class="container">
        <form name="uploadCarousel" method="post" enctype="multipart/form-data" asp-controller="Home" asp-action="PostCarousel">
            <div class="form-group">
                <br />
                <input type='file' name="uploads" multiple onchange="readURL(this);" />
                <img id="preview" src="http://www.adbazar.pk/frontend/images/default-image.jpg" alt="your image" />
                <div></div>
                <hr>
            </div>
            <div class="form-group">
                <br />
                <label>для фото маленького разрешения</label>
                <input type='file' name="uploads" multiple onchange="readURL2(this);" />
                <img id="preview2" src="http://www.adbazar.pk/frontend/images/default-image.jpg" alt="your image" />
                <div></div>
                <hr>
            </div>
            <div class="form-group">
                <input type="number" size="3" name="num" min="1" max="3" value="1" />
            </div>
            <div class="form-group">

                <label for="text">Текст</label>
                <textarea cols="30" rows="10" class="form-control text-area-text" name="Text" id="text" required></textarea>
                <div></div>
            </div>
            <input name="Carousel" type="submit" value="Загрузить слайд" />
        </form>
    </div>
}

<hr>
<div class="stripe"> НАШИ НОВОСТИ</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row">
        <div class="col-sm-6">
            <p class="last-news">Последние новости:</p>
            @foreach (var news in Model.NewsLst)
            {
                <br />
                <div class="row">
                    <div class="col-lg-12">
                        <span class="newsBlock">@news.Title</span>
                        <p class="date">@news.Day @news.Month @news.Year</p>
                    </div>
                </div>
                <br />


            }

        </div>
        <div class="col-sm-6">
            <p class="last-news">Новости из соцсетей:</p>

            @foreach (var face in Model.FaceBookLst)
            {
                <br />
                <div class="row">
                    <div class="col-lg-12">

                        <div class="row">
                            <div class="col-lg-3">
                                <img class="profile" src="@Model.PersonsLst.Where(e => e.Id == face.Person_Id).FirstOrDefault().ProfilePhoto" />
                            </div>
                            <div class="faceBook col-lg-9">
                                <div class="row">
                                    <div class="col" style="margin-top: 10px;">
                                        <img class="icon" src="http://rdsport.com.ua/wp-content/uploads/2017/01/fb-footer.png" />
                                    </div>
                                    <div class="col" style="margin-top: 10px;">
                                        <a class="fbName" href="@Model.PersonsLst.Where(e => e.Id == face.Person_Id).FirstOrDefault().ReferenceFB" target="_blank">

                                            @Model.PersonsLst.Where(e => e.Id == face.Person_Id).FirstOrDefault().Name
                                        </a>
                                    </div>
                                    <div class="col" style="margin-top: 10px;">
                                        <p style="margin-top: 1px;" class="date">
                                            @face.Date
                                        </p>
                                    </div>
                                    <div class="clear"></div>
                                    <p>@face.FBPost</p>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <br />

            }
            @{
                var Items = Model.PersonsLst.Select(c => new SelectListItem() { Value = c.Name, Text = c.Name }).ToList();
            }

            @if (User.IsInRole("Administrator"))
            {
                <a href="#openModal2" class="btn btn-default" style="margin-top:30px;">Опубликовать пост FaceBook</a>
                <div id="openModal2" class="modalDialog2">
                    <div>
                        <a href="#close" title="Закрыть" class="close2">X</a>
                        <form name="UploadFB" method="post" asp-controller="Home" asp-action="PostFB">

                            <div class="form-group">

                                <select name="Person"
                                        asp-items="Items"></select>
                                <label for="Text">Текст</label>
                                <textarea cols="30" rows="10" class="form-control text-area-text" name="Text" id="Text" required></textarea>
                                <div></div>
                            </div>
                            <input type="submit" value="Опубликовать" />
                        </form>
                    </div>
                </div>
            }

        </div>
    </div>
</div>


<hr>
<div class="stripe">ВИДЕО</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row videoBlock">
        <div class="col-sm-6">
            <iframe width="547" height="420" src="https://www.youtube.com/embed/WXBuVDKYvj8" frameborder="0" allow="autoplay; encrypted-media"
                    allowfullscreen></iframe>
        </div>
        <div class="col-sm-6">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas corrupti temporibus voluptatum dolor distinctio tenetur quis?
            Vero magnam velit similique numquam, illum necessitatibus nesciunt deserunt ipsam cumque, a, impedit nostrum? Lorem
            ipsum dolor sit amet consectetur adipisicing elit. Quas corrupti temporibus voluptatum dolor distinctio tenetur quis?
            Vero magnam velit similique numquam, illum necessitatibus nesciunt deserunt ipsam cumque, a, impedit nostrum?

        </div>

    </div>
</div>
<hr>
<div class="stripe">НАШИ ПРОЕКТЫ</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row">
        <br />
        @for (var i = Model.ProjectsLst.Count() - 1; i >= Model.ProjectsLst.Count() - 3; i--)
        {
            <div class="col-lg-4 projects">
                <img class="projImg"
                     src="@Model.ImagesLst.Where(e=>e.Id==Model.ProjectsLst[i].Image_Id).FirstOrDefault().ImagePath" />
                <p>@Model.ProjectsLst[i].Title</p>
            </div>
        }
    </div>
</div>

@section Scripts{

    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#preview')
                        .attr('src', e.target.result)
                        .width(180)
                        .height(100);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function readURL2(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#preview2')
                        .attr('src', e.target.result)
                        .width(180)
                        .height(100);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        $('.submit-btn').click(function () {
            alert('новость успешно добавлена');
            var obj = new Object();
            obj.
                $.ajax({
                    type: "POST",
                    url: "/AddNews/AddArticle",
                    data: obj,
                    success: function (data) {
                        location.reload();
                    }
                });
        });
    </script>

}
