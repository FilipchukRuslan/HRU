@model WebApp.ViewModels.StartPageViewModel
@{
    ViewData["Title"] = "Home Page";
}
<style>
    .eo-date .eo-date__day {
        font-size: 18px;
        font-weight: 700;
    }

    .eo-date .eo-date__month {
        font-size: 11px;
        text-transform: uppercase;
    }

    .eo-date {
        display: -webkit-box;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -webkit-flex-direction: column;
        -ms-flex-direction: column;
        flex-direction: column;
        background: #eee;
        text-align: center;
        width: 50px;
        height: 50px;
        color: #888;
        -webkit-box-align: center;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-align-content: center;
        -ms-flex-line-pack: center;
        align-content: center;
        -ms-grid-column-align: center;
        justify-items: center;
        -webkit-box-pack: center;
        -webkit-justify-content: center;
        -ms-flex-pack: center;
        justify-content: center;
        margin-top: 4px;
    }

    .modalDialog, .modalDialog2 {
        position: fixed;
        font-family: Arial, Helvetica, sans-serif;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0,0,0,0.8);
        z-index: 99999;
        -webkit-transition: opacity 400ms ease-in;
        -moz-transition: opacity 400ms ease-in;
        transition: opacity 400ms ease-in;
        display: none;
        pointer-events: none;
        max-height: 100%;
        overflow-y: auto;
    }

        .modalDialog:target, .modalDialog2:target {
            display: block;
            pointer-events: auto;
        }

        .modalDialog > div, .modalDialog2 > div {
            width: 600px;
            position: relative;
            margin: 10% auto;
            padding: 5px 20px 13px 20px;
            border-radius: 10px;
            background: #fff;
            background: -moz-linear-gradient(#fff, #999);
            background: -webkit-linear-gradient(#fff, #999);
            background: -o-linear-gradient(#fff, #999);
        }

    .close, .close2 {
        background: #ff0000;
        color: #fff;
        line-height: 25px;
        position: absolute;
        right: -12px;
        text-align: center;
        top: -10px;
        width: 24px;
        text-decoration: none;
        font-weight: bold;
        -webkit-border-radius: 12px;
        -moz-border-radius: 12px;
        border-radius: 12px;
        -moz-box-shadow: 1px 1px 3px #000;
        -webkit-box-shadow: 1px 1px 3px #000;
        box-shadow: 1px 1px 3px #000;
    }

        .close:hover, .close2:hover {
            background: #00d9ff;
        }

    .section:hover {
        cursor: pointer;
        color: slategrey;
    }

    .title:hover {
        cursor: pointer;
        color: slategrey;
    }

    #preview {
        max-height: 150px;
        min-height: 150px;
        max-width: 220px;
        min-width: 220px;
    }

    img {
        background-size: contain;
        background-size: cover;
    }

    li {
        list-style-type: none;
    }

    .listOfNews {
        margin-bottom: 6px;
        font-size: 18px;
    }

    .date {
        color: #414141;
        font-size: 16px;
    }

    hr {
        margin-top: 30px;
        margin-bottom: 0%;
        border: 1.5px solid #eeeeef;
    }

    .stripe {
        width: 33%;
        height: 30px;
        background-color: rgb(88, 88, 88);
        float: left;
        margin-right: 80px;
        margin-bottom: 30px;
        color: rgb(255, 255, 255);
        font-size: 20px;
        text-align: right;
        font-weight: 500;
        letter-spacing: 3px;
    }

    .decorator {
        width: 35%;
        height: 30px;
        border-top: 30px solid rgb(88, 88, 88);
        border-right: 15px solid transparent;
    }

    .brandHeader {
        background: linear-gradient(180deg, rgb(1, 141, 255), rgb(101, 206, 255));
        height: 75px;
    }

    .brandHeader {
        background: linear-gradient(180deg, rgb(0, 0, 0), rgb(41, 42, 51));
        height: 75px;
    }

    .container-fluid {
        margin: 0% auto;
        padding: 0%;
    }

    .last-news {
        margin: 5px 0px 25px;
        font-size: 25px;
        color: #414141;
        font-weight: 300;
    }

    .blackWraping {
        background-color: black;
        opacity: 0.6;
    }
</style>
@try
{
    <div class="container">
        <div class="row">
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    @for (var i = 0; i < Model.CarouselLst.Count(); i++)
                    {
                        <li data-target="#myCarousel" data-slide-to="@i" class="active"></li>
                    }
                </ol>
                @foreach (var item in Model.CarouselLst)
                {
                    <!-- Wrapper for slides -->
                    <div class="">
                        <div class="item">
                            <img src="@Model.ImagesLst.Where(e=>e.Id==item.Image_Id).FirstOrDefault().ImagePath" alt="Chania">
                            <div class="carousel-caption">
                                <p class="blackWraping">@item.Text</p>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
}
catch (Exception ex)
{
    <h3>Добавте слайд</h3>

}


@if (User.IsInRole("Administrator"))
{
    <a href="#openModal" class="btn btn-default" style="margin-top:30px;">Создать слайд</a>
    <div id="openModal" class="modalDialog">
        <div>
            <a href="#close" title="Закрыть" class="close">X</a>
            <form name="uploadCarousel" method="post" enctype="multipart/form-data" asp-controller="Home" asp-action="PostCarousel">
                <div class="form-group">
                    <br />
                    <input type='file' name="file" multiple onchange="readURL(this);" />
                    <img id="preview" src="http://www.adbazar.pk/frontend/images/default-image.jpg" alt="your image" />
                    <div></div>
                    <hr>
                </div>
                <div class="form-group">

                    <label for="text">Текст</label>
                    <textarea cols="30" rows="10" class="form-control text-area-text" name="Text" id="text" required>
                </textarea>
                    <div></div>
                </div>
                <input name="Carousel" type="submit" value="Опубликовать" />
            </form>
        </div>
    </div>
}

<hr>
<div class="stripe"> НАШИ НОВОСТИ</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row newsBlock">
        <div class="col-sm-6">
            <p class="last-news">Последние новости:</p>
            @foreach (var news in Model.NewsLst)
            {
                <br />
                <div class="row">
                    <div class="col-lg-12">
                        <span class="title">@news.Title</span>
                    </div>
                </div>
                <br />


            }

        </div>
        <div class="col-sm-6">
            <p class="last-news">Новости из соцсетей:</p>

            @for (var i = 0; i < 3; i++)//only 2 posts shold be on page
            {
                <br />
                <div class="row">
                    <div class="col-lg-12">
                        @try
                        {
                            @Html.Raw(Model.FaceBookLst[i].FBPost);

                        }
                        catch (Exception ex)
                        {
                            <span class="title"></span>
                        }

                    </div>
                </div>
                <br />

            }
            @if (User.IsInRole("Administrator"))
            {
                <a href="#openModal2" class="btn btn-default" style="margin-top:30px;">Опубликовать ссылку FaceBook</a>
                <div id="openModal2" class="modalDialog2">
                    <div>
                        <a href="#close" title="Закрыть" class="close2">X</a>
                        <form name="uploadFB" method="post" asp-controller="Home" asp-action="PostFB">

                            <div class="form-group">

                                <label for="title">Текст</label>
                                <textarea cols="30" rows="10" class="form-control text-area-title" name="Text" id="Text" required>
                                
                                </textarea>
                                <div></div>
                            </div>
                            <input type="submit" value="Опубликовать" />
                        </form>
                    </div>
                </div>
            }

        </div>
    </div>
</div>


<hr>
<div class="stripe">ВИДЕО</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row videoBlock">
        <div class="col-sm-6">
            <iframe width="547" height="420" src="https://www.youtube.com/embed/WXBuVDKYvj8" frameborder="0" allow="autoplay; encrypted-media"
                    allowfullscreen></iframe>
        </div>
        <div class="col-sm-6">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas corrupti temporibus voluptatum dolor distinctio tenetur quis?
            Vero magnam velit similique numquam, illum necessitatibus nesciunt deserunt ipsam cumque, a, impedit nostrum? Lorem
            ipsum dolor sit amet consectetur adipisicing elit. Quas corrupti temporibus voluptatum dolor distinctio tenetur quis?
            Vero magnam velit similique numquam, illum necessitatibus nesciunt deserunt ipsam cumque, a, impedit nostrum?

        </div>

    </div>
</div>
<hr>
<div class="stripe">НАШИ ПРОЕКТЫ</div>
<div class="decorator"></div>
<div class="clear"></div>
<div class="container">
    <div class="row projectsBlock">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam rerum quod aperiam expedita ut sunt, accusamus perferendis
        animi harum, perspiciatis ad. Dignissimos fugit, doloremque dolore praesentium adipisci cumque quis harum!
    </div>
</div>

@section Scripts{

    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#preview')
                        .attr('src', e.target.result)
                        .width(180)
                        .height(100);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        $('.submit-btn').click(function () {
            alert('новость успешно добавлена');
            var obj = new Object();
            obj.
                $.ajax({
                    type: "POST",
                    url: "/AddNews/AddArticle",
                    data: obj,
                    success: function (data) {
                        location.reload();
                    }
                });
        });
    </script>

}